<html>
<head>
<title>Ship Motion Application</title>
</head>
<body align="left" style="width:1100px">
    
    
    
    <div style="position: relative; left: 0; top: 0;" align="right"><a href="http://shiplab.hials.org">HOME - shiplab.hials.org <img src="http://www.shiplab.hials.org/wp-content/uploads/2014/11/Sunburst_D3.gif" width="5%"> </a></div>
    
	<h1>Ship Motion Application</h1>
    <div style="position: relative; left: 0; top: 0;" align="right">
            <p style="width:80%" align="right"> <small>by Sthefano L. Andrade and Henrique M. Gaspar<br>(sthefano.lande@gmail.com; hega @ hials.no), v0.1, Oct 2015.
            
             <br> A <a href="http://shiplab.hials.org">Ship Design and Operations Lab</a> App.</small></p>
        </div>
	<p align="left" style="width:1000px;margin-left:0px"> Graphical representation of estimated motion responses for ships. Heave, pitch, roll, vertical motion and vertical acceleration responses are calculated as function of length, breadth, draft, block coefficient, waterline breadth and operational profile. Bending moment is also estimated. Values can be changed by clicking and dragging the sliders. Based on the article <strong><a href="http://www.sciencedirect.com/science/article/pii/S0029801803001082">Estimation of ship motions using closed-form expressions by Jensen and Mansour (2004)</a></strong>.</p>
	
	<!--Graphics-->
	<h3 style="width:500px;float: right;margin-right:50px;">Graphics vizualization bar</h3>
	<div class="demo-container" style="width:550px;height:850px;float: right;margin-right:0px; position:relative;overflow:auto;border:solid"> 
		
		<p><div id="graphic1" class="demo-placeholder" style="width:500px; height:300px" align="left"></div></p>
    <p align="left" style="width:500px"> GRAPHIC 1 - Vertical motion (m/m) as function of wave frequency. Combined movement from the pitch and heave at the desired location. </p>
		<p><div id="graphic2" class="demo-placeholder" style="width:500px; height:300px" ></div></p>
    <p align="left" style="width:500px"> GRAPHIC 2 - Vertical acceleration (m/s<SUP>2</SUP>) as function of wave frequency. Combined movement from the pitch and heave at the desired location. Deriveted from the Vertical Motion calculated.</p>
		<p><div id="graphic3" class="demo-placeholder" style="width:500px; height:300px" ></div></p>
        <p align="left" style="width:500px"> RAPHIC 3 - Pitch motion is represented in this graphic as a function of wave frequency. Describes vertical motion caused by the pitch movement in meters at the desired location.</p>
		<p><div id="graphic4" class="demo-placeholder" style="width:500px; height:300px" ></div></p>
		<p align="left" style="width:500px"> GRAPHIC 4 - Heave motion (m/m) as function of wave frequency. Represents the heave induced vertical motion at the Center of Gravity of the vessel. </p>
        <p><div id="graphic5" class="demo-placeholder" style="width:500px; height:300px" ></div></p>
		<p align="left" style="width:500px"> GRAPHIC 5 -  Wave Induced Bending Moment (10<sup>6</sup> N.m) as function of wave frequency. </p>
        <p><div id="graphic11" class="demo-placeholder" style="width:500px; height:300px" ></div> GRAPHIC 6 - Roll Motion in degrees as a function of wave frequency</p>
        <p><div id="graphic12" class="demo-placeholder" style="width:500px; height:300px" ></div> GRAPHIC 7 - Roll Motion in degrees as a function of wave period</p>

	</div>

<div class="demo-container" style="width:500px;float: right;margin-right:0px; "> 
		
		

	</div>
	
		
	<!--Main Inputs -->
	
	<h2>General Inputs: </h2>
	<div style="position:relative">
	<p>Length: <input type = "text" id = "length" value = 96 oninput = "calculate_all()" style="position:absolute;left:210px;width:50px">
	<input type = "range" id = "slide_length" min = 10 value = 96 max = 300 step = 1 oninput = "calculate_all()" style="position:absolute;left:270px;width:200px"></p>
	<p>Waterline Breadth: <input type = "text" id = "w_breadth" value = 14 oninput = "calculate_all()"style="position:absolute;left:210px;width:50px">
	<input type = "range" id = "slide_w_breadth" min = 3 value = 14 max = 40 step = 0.2 oninput = "calculate_all()"style="position:absolute;left:270px;width:200px"></p>
	<p>Block Coefficient: <input type = "text" id = "block" value = 0.53 oninput = "calculate_all()"style="position:absolute;left:210px;width:50px" >
	<input type = "range" id = "slide_block" min = 0.4 value = 0.53 max = 1 step = 0.01 oninput = "calculate_all()"style="position:absolute;left:270px;width:200px"></p>
	<p>Draft: <input type = "text" id = "draft" value = 2.5 oninput = "calculate_all()"style="position:absolute;left:210px;width:50px">
	<input type = "range" id = "slide_draft" min = 0 value = 2.5 max = 20 step = 0.1 oninput = "calculate_all()"style="position:absolute;left:270px;width:200px"></p>
	<p>Speed: <input type = "text" id = "speed" value = 35 oninput = "calculate_all()"style="position:absolute;left:210px;width:50px">
	<input type = "range" id = "slide_speed" min = 0 value = 35 max = 50 step = 0.5 oninput = "calculate_all()"style="position:absolute;left:270px;width:200px"></p>
	<p>Relative Position to CG (%) : <input type = "text" id = "position" value = 0 oninput = "calculate_all()"style="position:absolute;left:210px;width:50px">
	<input type = "range" id = "slide_position" min = -100 value = 0 max = 100 step = 1 oninput = "calculate_all()"style="position:absolute;left:270px;width:200px"></p>
	<p>Heading: <input type = "text" id = "heading" value = 90 oninput = "calculate_all()"style="position:absolute;left:210px;width:50px">
	<input type = "range" id = "slide_heading" min = 0 value = 90 max = 360 step = 5 oninput = "calculate_all()"style="position:absolute;left:270px;width:200px"></p>
    <p>Wave Amplitude: <input type = "text" id = "wave_amplitude" value = 1 oninput = "calculate_all()"style="position:absolute;left:210px;width:50px">
	<input type = "range" id = "slide_wave_amplitude" min = 0 value = 1 max = 20 step = 0.25 oninput = "calculate_all()"style="position:absolute;left:270px;width:200px"></p>
	</div>

	
    <p style="position:relative"> Froude Number: <output id= "froude" style="position:absolute;left:210px;width:50px"></p>
    <!--SVG elements -->
	
	<div > <h3 align="center"style="width:500px;margin-left:0px">Wave Incidance Angle </h3>
	<div id = rectangle_here align="center" style="width:500px;margin-left:0px"></div>
	</div>
    
    <!--ROLLLLLLLL -->
    <h2>Roll Specific Inputs: </h2>
    <p>Waterplane Area Coefficient:<input type = "text" id = "Cwp" value = 0.715 oninput = "calculate_all()"style="position:absolute;left:220px;width:50px">
	<input type = "range" id = "slide_Cwp" min = 0.1 value = 0.715 max = 1 step = 0.005 oninput = "calculate_all()"style="position:absolute;left:280px;width:200px"></p>
    <p>Transverse Metacentric Height:<input type = "text" id = "GM" value = 4.2 oninput = "calculate_all()"style="position:absolute;left:220px;width:50px">
	<input type = "range" id = "slide_GM" min = 1 value = 4.2 max = 50 step = 0.1 oninput = "calculate_all()"style="position:absolute;left:280px;width:200px"></p>
    <p>Roll Natural Period:<input type = "text" id = "Tn" value = 6.5 oninput = "calculate_all()"style="position:absolute;left:220px;width:50px">
	<input type = "range" id = "slide_Tn" min = 0 value = 6.5 max = 50 step = 0.5 oninput = "calculate_all()"style="position:absolute;left:280px;width:200px"></p> <p>Estimated Tn Value = <output id= "Tn_guess" ></output>    
    <p>Critical Damping (%):<input type = "text" id = "damping" value = 20 oninput = "calculate_all()"style="position:absolute;left:220px;width:50px">
	<input type = "range" id = "slide_damping" min = 0 value = 20 max = 100 step = 1 oninput = "calculate_all()" style="position:absolute;left:280px;width:200px"></p>
    <p>Prismatic Length Ratio:<input type = "text" id = "Delta" value = 0.6 oninput = "calculate_all()"style="position:absolute;left:220px;width:50px">
	<input type = "range" id = "slide_delta" min = 0.1 value = 0.6 max = 1 step = 0.05 oninput = "calculate_all()" style="position:absolute;left:280px;width:200px"></p>

<p><button onclick="calculate_all()">Calculate</button> (for old browsers)</p>
<br>
<hr>
<br>
<h2 align="left"style="width:1000px;margin-left:0px"> Explaining the Inputs: </h2>
        <h3 align="left"style="width:1000px;margin-left:50px">General Inputs</h3>
        <p align="left"style="width:1000px;margin-left:0px"><strong>Length (m):</strong> Ship's waterline length.</p>
        <p align="left"style="width:1000px;margin-left:0px"><strong>Waterline Breadth (m):</strong> Ship's maximum breadth at the waterline.</p>
        <p align="left"style="width:1000px;margin-left:0px"><strong>Draft (m):</strong> Distance between the bottom of the vessel and the waterline.</p>
        <p align="left"style="width:1000px;margin-left:0px"><strong>Block Coefficient:</strong> Ratio between the ship's displacement volume and the volume of a prism with dimensions defined by Length, Waterline Breadth and Draft.</p>
        <p align="left"style="width:1000px;margin-left:0px"><strong>Speed (kts):</strong> Speed of the vessel, in knots.</p>
        <p align="left"style="width:1000px;margin-left:0px"><strong> Relative position to CG (%):</strong> Longitudinal position on the vessel where the user wishes to study the motion. Defined as a percentage of the ship length in relation to its center of gravity (in this case considered to be located at <i>L</i>/2). Positive to the fore and negative to the aft.</p>
        <p align="left"style="width:1000px;margin-left:0px"><strong> Heading (degrees):</strong> Direction of the waves in relation to the ship, where at 180 degrees they are head on waves.</p>
        <p align="left"style="width:1000px;margin-left:0px"><strong> Wave Amplitude(m):</strong> Amplitude of the waves.</p>
        <h3 align="left"style="width:1000px;margin-left:50px">Roll Specific Inputs:</h3>
        <p align="left"style="width:1000px;margin-left:0px"><strong>Waterplane Area Coefficient:</strong> Ratio between the ship's waterplane area at desired draft and its waterline length times waterline breadth.</p>
        <p align="left"style="width:1000px;margin-left:0px"><strong>Transverse Metacentric Height (m):</strong> Distance between the ship's transverse center of gravity and its transverse meta-center.</p>
        <p align="left"style="width:1000px;margin-left:0px"><strong>Roll Natural Period (s):</strong> Natural period of roll of the ship. When unknown by the user, the program suggests a value based on the following rule of thumb: <i>Tn</i> = 0.85*<i>Breadth</i>/<i>GM</i><sup>2</sup></p>
        <p align="left"style="width:1000px;margin-left:0px"><strong>Critical Damping (%):</strong> This parameter is used to take into account the water viscosity. The viscose roll damping is approximately accounted for by adding a percentage of the critical damping to the inviscid wave damping.</p>
        <p align="left"style="width:1000px;margin-left:0px"><strong>Prismatic Length Ratio:</strong> Length ratio of two prismatic bodies that represent the ship. The ship is assumed to consist of two prismatic elements with the same draft, T, but different breadths B0 and B1 and cross-sectional areas A0 and A1. As shown:</p>
    <p align="left"style="width:1000px;margin-left:0px"> <img src="delta.jpg"  style="width:60%"></p>
    <p><em>Model of the simplified ship used in roll motion analysis (Jensen and Mansour, 2004)</em></p>
    <!--Documentation -->

    <h2 align="left"style="width:1000px;margin-left:0px"> Commentary: </h2>
	<p align="left"style="width:1000px;margin-left:0px"> The formulation necessary to develop this app was based on the article <strong><a href="http://www.sciencedirect.com/science/article/pii/S0029801803001082">Estimation of ship motions using closed-form expressions by Jensen and Mansour (2004)</a></strong>. A validation of the results, comparing to model tests and linear strip theory are commented in <a herf="http://www.sciencedirect.com/science/article/pii/S0029801803001082">the paper</a>.
        
        <br><img src="http://ars.els-cdn.com/content/image/1-s2.0-S0029801803001082-gr3.gif">
        <p><em>Example of theory validation for vertical acceleration ((m/s2)/m) at forward perpendicular as function of wave frequency for different headings, <a herf="http://www.sciencedirect.com/science/article/pii/S0029801803001082">by Jensen and Mansour (2004)</a>.</p></em>
        
        The method is based on the wave  response of a box shaped vessel with Length, Breadth and Draft as main dimensions. The responses are calculated for different wave frequencies and then plotted. To account for the hull shape in a real vessel, the waterline breadth, <i>B<sub>0</sub></i>, is multiplied by the Block Coefficient, <i>C<sub>b</sub></i> and the result, <i>B</i>, is used as the input for the Beam, as shown below:</p> 
<p align="center"style="width:1000px;margin-left:0px"><i>B</i> = <i>B<sub>0</sub></i><i>C<sub>b</sub></i>
        <p align="left"style="width:1000px;margin-left:0px">The article explains the motivation and the value of this approach: <BR>
        <blockquote><em>In the design of ships, the wave-induced motions and accelerations are important to the assessment of the comfort of the crew and the passengers and to the scantlings
of securing devices like lashing for container stacks. Usually, the design values are taken from the classification society rules where explicit formulas are given. However, since the formulas do not depend on the operational profile the naval architect cannot assess the influence of e.g. a weather routing system or speed reduction in heavy sea.<BR>
            Direct calculation of the maximum wave-induced motions and accelerations a ship may encounter during its operational lifetime can be performed by taking into account the hull form, the mass distribution and the operational profile. A linear analysis is fairly straightforward using either two- or three-dimensional hydrodynamic procedures based on potential theory. However, such direct calculation procedures are not very useful in the conceptual design phase, because of lack of detailed data for the ship and because significant expertise and time are required to do the calculations.</blockquote></em> </p>
        <p align="left"style="width:1000px;margin-left:0px"> The benefit of such simplified methodology comes from the fact that it efficiently allows the operational profile of a vessel to be used as initial parameter for the ship motion analysis at conceptual phase with reliable results. The method, however, has a few accuracy limitations and simplifications, which are listed as:
        <ul>
            <li align="left"style="width:1000px;margin-left:0px">Heave response is smaller than reality when &#955;/L > 1 (wave longer than the ship's length);</li>
            <li align="left"style="width:1000px;margin-left:0px">Pitch response is larger than reality around &#955;/L = 1 for Froude numbers larger than 0.2;</li>
                <li align="left"style="width:1000px;margin-left:0px">The simplified formulas predict zero pitch in beam sea (90 degrees); </li>
            <li align="left"style="width:1000px;margin-left:0px">Pitch and heave movements are considered to have a phase difference of 90 degrees; </li>
            <li align="left"style="width:1000px;margin-left:0px">The theory assumes very deep water waves;</li>
            <li align="left"style="width:1000px;margin-left:0px">For the Bending Moment Calculation the minimum Cb allowed is 0.6</li>
            </ul> </p>
           
        <p align="left"style="width:1000px;margin-left:0px"> The app is coded in javascript and runs in a web based environment, allowing for a real time visualization of the results in different browsers and systems.</p>



        



        <h2 align="left"style="width:1000px;margin-left:0px"> Preliminary Graphics' Explanantion </h2>      
        <p align="left"style="width:1000px;margin-left:0px"></p>
        
                                        <!--Graphics Explained-->

<table align="left"style="border:solid;width:100%">
            
                                            <!--first line//-->
    
                <tr>
                                       
                    <td style="border:solid"><div id="graphic6" class="demo-placeholder" style="width:500px; height:300px" align="left"></div></td> 
                    <td style="border:solid">
                        <list align="top"><p align="left" style="width:500px"> GRAPHIC 1 - Vertical motion (m/m) as function of wave frequency. This motion takes into consideration the combined movement from the pitch and heave at the desired location.</p>
                            
                            <li>Length: Bigger length means reduced vertical motion;</li>
                            <li>Breadth: Bigger breadth means reduced vertical motion;</li>
                            <li>Cb: Bigger block coefficient means reduced vertical motion;</li>
                            <li>Draft: Increasing the draft value also increases the maximum vertical motion value and it occurs at a lower wave frequencies;</li>
                            <li>Speed: It affects the wave encounter frequency, which also affects the intensity of the motion. Higher speed translates into bigger motion;</li>
                            <li>Relative Position: It affects the movement caused by pitch, thus having  bigger vertical motion;</li>
                            <li>Heading: It influences the wave frequency at which the maximum vertical motion values occur.</li>
                        </list>
                    </td>
                </tr>

                                            <!--second line//-->
                <tr>                   
                    <td style="border:solid"><div id="graphic7" class="demo-placeholder" style="width:500px; height:300px" ></div></td> 
                    <td style="border:solid">
                       <list align="top"><p align="left" style="width:500px"> GRAPHIC 2 - Vertical acceleration (m/s<SUP>2</SUP>) as function of wave frequency. This motion takes into consideration the combined movement from the pitch and heave at the desired location. It is deriveted from the Vertical Motion calculated.</p>
                            <li>Length: Bigger length means reduced vertical acceleration;</li>
                            <li>Breadth: Increasing the breadth decreases the vertical acceleration to a point and then it increases again;</li>
                            <li>Cb: Increasing the block coefficient decreases the vertical acceleration to a point and then it increases again;</li>
                            <li>Draft: Increasing the draft decreases the vertical acceleration to a point, then the maximum value becomes constant, but the wave frequency at which it occurs starts to have higher values;</li>
                            <li>Speed: It affects the wave encounter frequency, which also affects the intensity of the vertical acceleration. Higher speed translates into bigger acceleration;</li>
                            <li>Relative Position: Bigger vertical acceleration happens at extremes;</li>
                            <li>Heading: It influences to the vertical acceleration varies greatly.</li>                        
                                                                                               
                        </list>
                    </td>
                </tr>
 

                                            <!--third line//-->
                <tr>                 
                    <td style="border:solid"><div id="graphic8" class="demo-placeholder" style="width:500px; height:300px" ></div> </td> 

                    <td style="border:solid">
                        <list align="top"><p align="left" style="width:500px"> GRAPHIC 3 - Pitch motion divided by the wave number (k) is represented in this graphic as a function of wave frequency. It describes vertical motion caused by the pitch movement in meters at the desired location.</p>
                            <li>Length: Increasing the length increases the pitch motion to a point, then it decreases and become stable. However, the changes also affect when the resonance frequency occurs;</li>
                            <li>Breadth: Bigger breadth means increased pitch motion values;</li>
                            <li>Cb: Changes in the block coefficient causes the pitch motion intensity to decrease and increase again (Unrealistic values when Cb ranges from 0.75 to 0.85 at L/B = 96/40);</li>
                            <li>Draft: Increasing the draft value also increases the maximum pitch motion value and it occurs at a lower wave frequencies;</li>
                            <li>Speed: It affects the wave encounter frequency, which also affects the intensity of the pitch motion. Higher speed translates into bigger motion;</li>
                            <li>Relative Position: It peaks the vertical motion due to pitch at the extremes and is 0 at the Center of Gravity;</li>
                            <li>Heading: It varies a lot, with no pitch motion at 270 and 90 degrees (side waves).</li>
                        
                        </list>
                    </td>
                </tr> 

                                            <!--fourth line//-->
                
                <tr>
                                        
                    <td style="border:solid"><div id="graphic9" class="demo-placeholder" style="width:500px; height:300px" ></div></td> 
                    <td style="border:solid">
                        <list align="top"><p align="left" style="width:500px"> GRAPHIC 4 - Heave motion (m/m) as function of wave frequency. It represents the heave induced vertical motion at the Center of Gravity of the vessel.  </p>
                            <li>Length: Bigger length means reduced heave motion;</li>
                            <li>Breadth: Bigger breadth means reduced heave motion. Changing it might create a resonance spike  (depends on the other parameters combination);</li>
                            <li>Cb: Block Coefficient variances do not affect the heave motion in this formulation;</li>
                            <li>Draft: Increasing the draft value also increases the maximum heave motion value and it occurs at a lower wave frequencies;</li>
                            <li>Speed: It affects the wave encounter frequency, which also affects the intensity of the heave motion. Higher speed translates into bigger motion;</li>
                            <li>Relative Position: Changes have no effect, since the heave motion is constant on the whole vessel length;</li>
                            <li>Heading: It influences the wave frequency at which the maximum heave motion values occur.</li>
                           
                        </list>
                    </td>
                </tr>
		          
                                            <!--fifth line//-->
                
                <tr>
                                        
                    <td style="border:solid"><div id="graphic10" class="demo-placeholder" style="width:500px; height:300px" ></div></td> 
                    <td style="border:solid">
                        <list align="top"><p align="left" style="width:500px"> GRAPHIC 5 -  Wave Induced Bending Moment (10<sup>6</sup> N.m) as function of wave frequency. </p>
                            <li>Length: Bigger length means increased wave induced bending moment;</li>
                            <li>Breadth: Bigger breadth means increased wave induced bending moment;</li>
                            <li>Cb: Bigger block coefficient means increased wave induced bending moment;</li>
                            <li>Draft: Bigger draft means reduced wave induced bending moment;</li>
                            <li>Speed: Higher speed means increased wave induced bending moment;</li>
                            <li>Relative Position: Does not affect the formulation for wave induced bending moment. The maximum moment occurs at midship in ships;</li>
                            <li>Heading: The effect of changes in heading varies a lot;</li>
                            
                        </list>
                    </td>
                </tr>
		                
        </table>

        	
	<!--Script for using flot graphics -->
	
	<script language="javascript" type="text/javascript" src="jquery-1.11.3.min.js"></script>
	<script language="javascript" type="text/javascript" src="flot/jquery.flot.min.js"></script>
	
	<!--Java script CORE -->
		
	<script>
	
	//Vector declaration before the main function -- They are used to calculate the properties//
			var wave_freq = [];
			var Vertical_Movement=[];
			var Vertical_Acceleration=[];
			var Pitch_Movement=[];
			var Heave_Movement=[];
            var Bending_Moment=[];
            var Roll_Movement=[];
            var wave_period=[];
			
		calculate_all();
			
	//Main Function that will run each time one slider  is changed//					
		function calculate_all(){
		
		//Vector declaration in the the main function -- They receive the properties and are used to plot the curves//
			var Results_array1=[];
			var Results_array2=[];
			var Results_array3=[];
			var Results_array4=[];
            var Results_array5=[]; 
            var Results_array6=[];
            var Results_array7=[];
			
		
		//Receives and changes the values from the Input sliders//	
			Length = document.getElementById("slide_length").value;
			document.getElementById("length").value = Length;
			W_Breadth = document.getElementById("slide_w_breadth").value;
			document.getElementById("w_breadth").value = W_Breadth;
			Block = document.getElementById("slide_block").value;
			document.getElementById("block").value = Block;
			Draft = document.getElementById("slide_draft").value;
			document.getElementById("draft").value = Draft;
			Speed = document.getElementById("slide_speed").value;
			document.getElementById("speed").value = Speed;
			Heading = document.getElementById("slide_heading").value;
			document.getElementById("heading").value = Heading;
			Position = document.getElementById("slide_position").value;
			document.getElementById("position").value = Position;
            Wave_Amplitude = document.getElementById("slide_wave_amplitude").value;
			document.getElementById("wave_amplitude").value = Wave_Amplitude;
           
			
			//This SVG element visually shows the relative position of the ship to the waves //
			
			svg_element = '<svg width="250" height="250" >                                                                                                                       <line x1="125"  y1="35" x2="125"   y2="215" style="stroke:#727272;"/>                                                                                                                  <line x1="35"  y1="125" x2="215"   y2="125" style="stroke:#727272;"/>                                                                                                                  <line x1="125"  y1="35" x2="125"   y2="215" style="stroke:#727272;" transform="rotate(45,125,125)"/>                                                                                  <line x1="125"  y1="35" x2="125"   y2="215" style="stroke:#727272;" transform="rotate(135,125,125)"/>                                                                              <polyline points="125,55  150,75 150,185 100,185 100,75 " style="stroke:#000000" transform="rotate('+ (180 - Heading) +',125,125)" />                                           <circle cx="125" cy="125" r="90" style="stroke:#000000;stroke-width:3;fill:none"/>                                                                                              <polyline points="125,54  140,37 110,37 125,54" style="stroke:#000000;stroke-width:3;fill:none"/>                                                                                      <text x="125"  y="30" style="text-anchor: middle">'+Heading+'</text>                                                                                                                  <text x="125"  y="235" style="text-anchor: middle"></text>                                                                                                                       <text x="230"  y="125" style="text-anchor:middle"></text>                                                                                                                        <text x="25"  y="125" style="text-anchor:middle"></text>                                                                                                                                                                                                                        </svg>'
            
			document.getElementById("rectangle_here").innerHTML = svg_element;
			
			//These constants and variables are prepared to be used inside the "for()" that calculates the vessels motion responses //
			 
			g=9.81;	
			heading=Heading;
			betha=heading*Math.PI/180;
			
			Breadth = W_Breadth*Block;
			Speed_metric=Speed*0.5144444;
			Froude_N=Speed_metric/Math.sqrt((g*Length));
			position=Length*Position/200;
			
            document.getElementById("froude").innerHTML = Math.round(Froude_N*1000)/1000;
			//This "for()" calculates the vessel responses to different waves frequencies//
						
			for (i = 0; i <= 1000; i++)
			{
			wave_freq[i]=0.05+1.95*i/1000;
			wave_number=Math.pow(wave_freq[i],2)/g;
			eff_wave_number=Math.abs(wave_number*Math.cos(betha));
			smith_factor=Math.exp(-wave_number*Draft);
			alpha=1-Froude_N*Math.sqrt(wave_number*Length)*Math.cos(betha);
			sectional_hydro_damping=2*Math.sin(0.5*wave_number*Breadth*Math.pow(alpha,2))
				*Math.exp(-wave_number*Draft*Math.pow(alpha,2));
			a=Math.pow(1-wave_number*Draft,2);
			b=Math.pow((Math.pow(sectional_hydro_damping,2)/(wave_number*Breadth*Math.pow(alpha,3))),2);
			f=Math.sqrt(a+b);
			F=smith_factor*f*(2/(eff_wave_number*Length))*Math.sin(eff_wave_number*Length/2);
			G=smith_factor*f*(24/(Math.pow(eff_wave_number*Length,2)*Length))*
				(Math.sin(eff_wave_number*Length/2)-(eff_wave_number*Length/2)*
				Math.cos(eff_wave_number*Length/2));
			eta=1/(Math.sqrt(Math.pow((1-2*wave_number*Draft*Math.pow(alpha,2)),2)+
				Math.pow(Math.pow(sectional_hydro_damping,2)/
				(wave_number*Breadth*Math.pow(alpha,2)),2)));
			FRF_Heave=Wave_Amplitude*eta* F;
			FRF_Pitch=Wave_Amplitude*eta* G;
			
			Vertical_Movement[i]=Math.sqrt(Math.pow(FRF_Heave,2) + Math.pow(FRF_Pitch,2)*Math.pow(position,2));
			Vertical_Acceleration[i]=Math.pow(alpha,2)*wave_number*g*Vertical_Movement[i];
			Pitch_Movement[i]=Math.sqrt(Math.pow(FRF_Pitch,2)*Math.pow(position,2));
			Heave_Movement[i]=Math.abs(FRF_Heave);
                
                //Bending Moment Response//
                
            Cb=Math.max(0.6,Block);    
            phi=2.5*(1-Cb);    
            F_Cb=(Math.pow(1-phi,2)+0.6*alpha*(2-phi));  
                
            F_v=1+3*Math.pow(Froude_N,2);    
                
            Bending_Moment[i]=Wave_Amplitude*(smith_factor*((1-wave_number*Draft)/(Math.pow(Length*eff_wave_number,2)))*(1-Math.cos(eff_wave_number*Length/2)-(eff_wave_number*Length/4)*Math.sin(eff_wave_number*Length/2))*F_v*F_Cb*Math.pow(Math.abs(Math.cos(betha)),1/3))*1025*g*W_Breadth*Length*Length/1000000;
             
			}
            
             ////// ROLL /////
        
            Cwp = document.getElementById("slide_Cwp").value;
            document.getElementById("Cwp").value = Cwp; 
            GM = document.getElementById("slide_GM").value;
            document.getElementById("GM").value = GM; 
            natural_period = document.getElementById("slide_Tn").value;
            document.getElementById("Tn").value = natural_period; 
            critical_damping_percentage = document.getElementById("slide_damping").value;
            document.getElementById("damping").value = critical_damping_percentage;
            delta = parseFloat(document.getElementById("slide_delta").value );
            document.getElementById("Delta").value = delta; 
            
  //      Cwp = 0.713;   
        critical_damping_percentage = critical_damping_percentage/100;
 //       natural_period = 6.3;
 //       GM=4.19;
        
        //roll_hydro_damping = 1;
        //excitation_frequency=10000000;
            
        B_0 = W_Breadth;    
        Cb=Block;
        document.getElementById("Tn_guess").innerHTML = Math.round(0.85*W_Breadth*10/Math.sqrt(GM))/10;    
        restoring_moment_coeff = g*1025*Cb*Length*W_Breadth*Draft*GM;    
            
            for (i = 0; i <= 1000; i++){
                
                wave_freq[i]=0.05+1.95*i/1000;
                wave_period[i]=2*3.14159/wave_freq[i];
                wave_number=Math.pow(wave_freq[i],2)/g;
 
                alpha=1-Froude_N*Math.sqrt(wave_number*Length)*Math.cos(betha);
                encounter_frequency =  wave_freq[i]*alpha;           
                eff_wave_number=Math.abs(wave_number*Math.cos(betha));
                
                breadth_ratio =  (Cwp - delta)/(1 - delta);
                B_1 = breadth_ratio*B_0;
                A_0 = Cb*B_0*Draft/(delta+breadth_ratio*(1-delta));
                A_1 = breadth_ratio*A_0;
                
                //sectional damping coefficient//
                Breadth_Draft_ratio = B_0/Draft;                                
                    //3 <= B/T <= 6//
                if (Breadth_Draft_ratio>3){
                    a0=0.256*Breadth_Draft_ratio - 0.286;
                    b0=-0.11*Breadth_Draft_ratio - 2.55;
                    d0=0.033*Breadth_Draft_ratio - 1.419;
                }
                
                    //1 <= B/T <= 3//
                else {
                    a0=-3.94*Breadth_Draft_ratio + 13.69;
                    b0=-2.12*Breadth_Draft_ratio - 1.89;
                    d0=1.16*Breadth_Draft_ratio-7.97;
                }
                
                Breadth_Draft_ratio = B_1/Draft;                                
                    //3 <= B/T <= 6//
                if (Breadth_Draft_ratio>3){
                    a1=0.256*Breadth_Draft_ratio - 0.286; 
                    b1=-0.11*Breadth_Draft_ratio - 2.55;
                    d1=0.033*Breadth_Draft_ratio - 1.419;
                }
                
                    //1 <= B/T <= 3//
                else {
                    a1=-3.94*Breadth_Draft_ratio + 13.69;
                    b1=-2.12*Breadth_Draft_ratio - 1.89;
                    d1=1.16*Breadth_Draft_ratio-7.97;
                }
               
               // console.log(B_0/Draft,B_1/Draft)
                //console.log(a0,a1)
                //B_44 - hydro damping coeff//
                b_44_0 = (1025*A_0*B_0*B_0*a0*Math.exp(b0*Math.pow(encounter_frequency,-1.3))*Math.pow(encounter_frequency,d0)/(Math.sqrt(B_0/(2*g))));
                b_44_1 = (1025*A_1*B_1*B_1*a1*Math.exp(b1*Math.pow(encounter_frequency,-1.3))*Math.pow(encounter_frequency,d1)/(Math.sqrt(B_1/(2*g))));
                
                damping_ratio=Math.sqrt(b_44_1/b_44_0);
                
                b_44 = Length*b_44_0*(delta + b_44_1*(1-delta)/b_44_0);
                //total damping = hydro damping + additional damping//
                
                add_damping = restoring_moment_coeff*natural_period/Math.PI;
                
                roll_hydro_damping= b_44 + add_damping*critical_damping_percentage;
                
                //excitation frequency//
                if (heading == 90  || heading ==270){
                excitation_frequency=Math.sqrt(1025*g*g*b_44_0/encounter_frequency)*(delta+damping_ratio*(1-delta))*Length
             
                }
               else{  
                A=Math.abs(Math.sin(betha))*Math.sqrt(1025*g*g/encounter_frequency)*Math.sqrt(b_44_0)*2/eff_wave_number;
                B=Math.pow(Math.sin(0.5*delta*Length*eff_wave_number),2);
                C=Math.pow(damping_ratio*Math.sin(0.5*(1-delta)*Length*eff_wave_number),2);
                D=2*damping_ratio*Math.sin(0.5*delta*Length*eff_wave_number)*Math.sin(0.5*(1-delta)*Length*eff_wave_number)*Math.cos(0.5*Length*eff_wave_number);
               
                excitation_frequency=A*Math.sqrt(B+C+D)
               }
                
           //  excitation_frequency=Math.sqrt(1025*g*g*b_44_0/encounter_frequency)*(delta+damping_ratio*(1-delta))*Length; 
                //main formula//
                          
                A = Math.pow(-Math.pow(encounter_frequency*natural_period/(2*3.14159),2)+1,2);
                B = Math.pow(restoring_moment_coeff,2); 
                C = Math.pow(encounter_frequency*roll_hydro_damping,2); 
                
            
               Roll_Movement[i] = Wave_Amplitude*excitation_frequency/(Math.sqrt(A*B+C));
              //Roll_Movement[i] = Wave_Amplitude*excitation_frequency
             // Roll_Movement[i] = Wave_Amplitude*excitation_frequency/(Math.sqrt(A*B+C));
                
            }
			
			//This "for()" receives the results from the motion vectors and prepare the graphics//
			
			for (i = 0; i <= 1000; i++) 
			{
			Results_array1.push([wave_freq[i],Vertical_Movement[i]]);
			Results_array2.push([wave_freq[i],Vertical_Acceleration[i]]);
			Results_array3.push([wave_freq[i],Pitch_Movement[i]]);
			Results_array4.push([wave_freq[i],Heave_Movement[i]]);
            Results_array5.push([wave_freq[i],Bending_Moment[i]]);
            Results_array6.push([wave_freq[i],Roll_Movement[i]*180/Math.PI]);
            Results_array7.push([wave_period[i],Roll_Movement[i]*180/Math.PI]);
                
			}
	
			
			$.plot("#graphic1",[{label: "Vertical Movement (m/m) x &#969; (rad/s)",     data: Results_array1 }],{series:{lines:{show:true}},yaxis:{ticks:10,tickDecimals:3},grid:{backgroundColor:{colors:["#fff","#eee"]},borderWidth:{top: 1,right: 1,bottom: 2,left: 2}}});
			$.plot("#graphic2",[{label: "Vertical Acceleration (m/s<SUP>2</SUP>) x &#969; (rad/s)", data: Results_array2 }],{series:{lines:{show:true}},yaxis:{ticks:10,tickDecimals:3},grid:{backgroundColor:{colors:["#fff","#eee"]},borderWidth:{top: 1,right: 1,bottom: 2,left: 2}}});
			$.plot("#graphic3",[{label: "Pitch motion/k (m/m) x &#969; (rad/s)",        data: Results_array3 }],{series:{lines:{show:true}},yaxis:{ticks:10,tickDecimals:3},grid:{backgroundColor:{colors:["#fff","#eee"]},borderWidth:{top: 1,right: 1,bottom: 2,left: 2}}});
			$.plot("#graphic4",[{label: "Heave motion (m/m) x &#969; (rad/s)",        data: Results_array4 }],{series:{lines:{show:true}},yaxis:{ticks:10,tickDecimals:3},grid:{backgroundColor:{colors:["#fff","#eee"]},borderWidth:{top: 1,right: 1,bottom: 2,left: 2}}});
            $.plot("#graphic5",[{label: "Bending Moment (N.m 10e6) x &#969; (rad/s)",        data: Results_array5 }],{series:{lines:{show:true}},yaxis:{ticks:10,tickDecimals:3},grid:{backgroundColor:{colors:["#fff","#eee"]},borderWidth:{top: 1,right: 1,bottom: 2,left: 2}}});
            $.plot("#graphic6",[{label: "Vertical Movement (m/m) x &#969; (rad/s)",     data: Results_array1 }],{series:{lines:{show:true}},yaxis:{ticks:10,tickDecimals:3},grid:{backgroundColor:{colors:["#fff","#eee"]},borderWidth:{top: 1,right: 1,bottom: 2,left: 2}}});
			$.plot("#graphic7",[{label: "Vertical Acceleration (m/s<SUP>2</SUP>) x &#969; (rad/s)", data: Results_array2 }],{series:{lines:{show:true}},yaxis:{ticks:10,tickDecimals:3},grid:{backgroundColor:{colors:["#fff","#eee"]},borderWidth:{top: 1,right: 1,bottom: 2,left: 2}}});
			$.plot("#graphic8",[{label: "Pitch motion/k (m/m) x &#969; (rad/s)",        data: Results_array3 }],{series:{lines:{show:true}},yaxis:{ticks:10,tickDecimals:3},grid:{backgroundColor:{colors:["#fff","#eee"]},borderWidth:{top: 1,right: 1,bottom: 2,left: 2}}});
			$.plot("#graphic9",[{label: "Heave motion (m/m) x &#969; (rad/s)",        data: Results_array4 }],{series:{lines:{show:true}},yaxis:{ticks:10,tickDecimals:3},grid:{backgroundColor:{colors:["#fff","#eee"]},borderWidth:{top: 1,right: 1,bottom: 2,left: 2}}});
            $.plot("#graphic10",[{label: "Bending Moment (N.m x 10e6) x &#969; (rad/s)",        data: Results_array5 }],{series:{lines:{show:true}},yaxis:{ticks:10,tickDecimals:3},grid:{backgroundColor:{colors:["#fff","#eee"]},borderWidth:{top: 1,right: 1,bottom: 2,left: 2}}});
            $.plot("#graphic11",[{label: "Roll (degrees) x &#969; (rad/s)",        data: Results_array6 }],{series:{lines:{show:true}},yaxis:{ticks:10,min:0.5,tickDecimals:2},xaxis:{ticks:5,max:2},grid:{backgroundColor:{colors:["#fff","#eee"]},borderWidth:{top: 1,right: 1,bottom: 2,left: 2}}});
            $.plot("#graphic12",[{label: "Roll (degrees) x T; (s)",        data: Results_array7 }],{series:{lines:{show:true}},yaxis:{ticks:10,min:0.5,tickDecimals:2},xaxis:{ticks:15,max:30},grid:{backgroundColor:{colors:["#fff","#eee"]},borderWidth:{top: 1,right: 1,bottom: 2,left: 2}}});
           
           
        
        
            
        }
		
	</script>
	
</body>

</html>